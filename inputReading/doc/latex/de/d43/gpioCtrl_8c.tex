\doxysection{src/gpio\+Ctrl.c File Reference}
\label{gpioCtrl_8c}\index{src/gpioCtrl.c@{src/gpioCtrl.c}}
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$fcntl.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include $<$sys/stat.\+h$>$}\newline
{\ttfamily \#include $<$sys/ioctl.\+h$>$}\newline
{\ttfamily \#include $<$sys/time.\+h$>$}\newline
{\ttfamily \#include $<$linux/gpio.\+h$>$}\newline
{\ttfamily \#include $<$linux/i2c-\/dev.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include \char`\"{}spi.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gpiolib.\+h\char`\"{}}\newline
{\ttfamily \#include $<$sys/socket.\+h$>$}\newline
{\ttfamily \#include $<$sys/un.\+h$>$}\newline
{\ttfamily \#include $<$netinet/in.\+h$>$}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ gpio\+\_\+desc}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \textbf{ \+\_\+\+DEFAULT\+\_\+\+SOURCE}
\item 
\#define \textbf{ NR\+\_\+\+OF\+\_\+\+SEGMENTS}~4
\item 
\#define \textbf{ BUFFER\+\_\+\+SIZE}~16 $\ast$ 1024
\item 
\#define \textbf{ SEVEN\+\_\+\+SEG\+\_\+\+ENABLE}~41
\item 
\#define \textbf{ S400}~10
\item 
\#define \textbf{ S401}~31
\item 
\#define \textbf{ S402}~15
\item 
\#define \textbf{ S403}~7
\item 
\#define \textbf{ DS400}~11
\item 
\#define \textbf{ DS401}~14
\item 
\#define \textbf{ DS402}~13
\item 
\#define \textbf{ DS403}~4
\item 
\#define \textbf{ MS}~1000
\item 
\#define \textbf{ TRUE}~1
\item 
\#define \textbf{ FALSE}~0
\item 
\#define \textbf{ JOYSTICK\+\_\+\+ADDR}~0x34
\item 
\#define \textbf{ JOYSTICK\+\_\+b\+\_\+\+LEFT\+\_\+\+RIGHT}~0x21
\item 
\#define \textbf{ JOYSTICK\+\_\+b\+\_\+\+UP\+\_\+\+DOWN}~0x23
\item 
\#define \textbf{ JOYSTICK\+\_\+\+A\+\_\+\+LEFT\+\_\+\+RIGHT}~0x25
\item 
\#define \textbf{ JOYSTICK\+\_\+\+A\+\_\+\+UP\+\_\+\+DOWN}~0x27
\item 
\#define \textbf{ UNIX\+\_\+\+PATH\+\_\+\+MAX}~108
\item 
\#define \textbf{ SOCKET\+\_\+\+READY}~0x\+FF
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \textbf{ gpio\+\_\+desc} \textbf{ gpio\+\_\+desc}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ gpio\+\_\+desc} \textbf{ init\+Gpio\+Input} (const char $\ast$gpio\+\_\+chip, unsigned int gpio\+\_\+line)
\item 
struct \textbf{ gpio\+\_\+desc} \textbf{ init\+Gpio\+Output} (const char $\ast$gpio\+\_\+chip, unsigned int gpio\+\_\+line)
\item 
int \textbf{ read\+Btn} (struct \textbf{ gpio\+\_\+desc} gpio)
\item 
int \textbf{ control\+Gpio\+Out} (struct \textbf{ gpio\+\_\+desc} gpio, int value)
\item 
void \textbf{ sleep\+\_\+ms} (int milliseconds)
\item 
int \textbf{ set\+Up\+Adc\+Value} (uint8\+\_\+t setup)
\item 
int \textbf{ read\+Adc\+Value} ()
\item 
uint8\+\_\+t \textbf{ read\+ADCs} ()
\item 
uint8\+\_\+t \textbf{ read\+Inputs} (struct \textbf{ gpio\+\_\+desc} s400, struct \textbf{ gpio\+\_\+desc} s401, struct \textbf{ gpio\+\_\+desc} s402, struct \textbf{ gpio\+\_\+desc} s403, struct \textbf{ gpio\+\_\+desc} ds400, struct \textbf{ gpio\+\_\+desc} ds401, struct \textbf{ gpio\+\_\+desc} ds402, struct \textbf{ gpio\+\_\+desc} ds403)
\item 
void \textbf{ signal\+\_\+callback\+\_\+handler} (int signum)
\item 
bool \textbf{ establish\+Connection} (void)
\item 
int \textbf{ main} (void)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int8\+\_\+t \textbf{ input\+State} = 0x00
\item 
uint8\+\_\+t \textbf{ joystick\+Up\+Reading} = 0x\+FA
\item 
uint8\+\_\+t \textbf{ joystick\+Down\+Reading} = 0x\+F4
\item 
uint8\+\_\+t \textbf{ joystick\+Right\+Reading} = 0x\+FA
\item 
uint8\+\_\+t \textbf{ joystick\+Left\+Reading} = 0x\+F4
\item 
uint8\+\_\+t \textbf{ joystick\+Up} = 0x08
\item 
uint8\+\_\+t \textbf{ joystick\+Down} = 0x04
\item 
uint8\+\_\+t \textbf{ joystick\+Right} = 0x02
\item 
uint8\+\_\+t \textbf{ joystick\+Left} = 0x01
\item 
uint8\+\_\+t \textbf{ start\+Pressed} = 0x80
\item 
uint8\+\_\+t \textbf{ select\+Pressed} = 0x40
\item 
uint8\+\_\+t \textbf{ a\+Pressed} = 0x20
\item 
uint8\+\_\+t \textbf{ b\+Pressed} = 0x10
\item 
uint8\+\_\+t \textbf{ error\+Code} = 0x\+FF
\item 
static bool \textbf{ running} = true
\item 
static int32\+\_\+t \textbf{ i2c\+\_\+fd}
\item 
static uint8\+\_\+t \textbf{ i2c\+Comm\+Buffer} [8]
\item 
static uint8\+\_\+t \textbf{ rev\+ID}
\item 
static uint8\+\_\+t \textbf{ dev\+ID}
\item 
static int \textbf{ fd}
\item 
static const char \textbf{ GPIO\+\_\+\+BANK1} [$\,$] = \char`\"{}/dev/gpiochip1\char`\"{}
\item 
static const char \textbf{ GPIO\+\_\+\+BANK3} [$\,$] = \char`\"{}/dev/gpiochip3\char`\"{}
\item 
const char \textbf{ I2\+C\+\_\+\+DEVICE} [$\,$] = \char`\"{}/dev/i2c-\/0\char`\"{}
\item 
static char \textbf{ chrdev\+\_\+name} [20]
\item 
int \textbf{ adc\+\_\+fd}
\item 
int \textbf{ char\+Read}
\item 
char \textbf{ adc\+Buffer} [\textbf{ BUFFER\+\_\+\+SIZE}]
\item 
bool \textbf{ run\+Socket} = true
\item 
struct sockaddr\+\_\+un \textbf{ address}
\item 
int \textbf{ socket\+\_\+fd}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\label{gpioCtrl_8c_a8fb447618db946a9e2a596d9ea18763f}} 
\index{gpioCtrl.c@{gpioCtrl.c}!\_DEFAULT\_SOURCE@{\_DEFAULT\_SOURCE}}
\index{\_DEFAULT\_SOURCE@{\_DEFAULT\_SOURCE}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{\_DEFAULT\_SOURCE}
{\footnotesize\ttfamily \#define \+\_\+\+DEFAULT\+\_\+\+SOURCE}



Definition at line 14 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a6b20d41d6252e9871430c242cb1a56e7}} 
\index{gpioCtrl.c@{gpioCtrl.c}!BUFFER\_SIZE@{BUFFER\_SIZE}}
\index{BUFFER\_SIZE@{BUFFER\_SIZE}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{BUFFER\_SIZE}
{\footnotesize\ttfamily \#define BUFFER\+\_\+\+SIZE~16 $\ast$ 1024}



Definition at line 51 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_afdd419901c307915cd19a9e269a10933}} 
\index{gpioCtrl.c@{gpioCtrl.c}!DS400@{DS400}}
\index{DS400@{DS400}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{DS400}
{\footnotesize\ttfamily \#define DS400~11}



Definition at line 62 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a27998cbfa6ef2e33e4fbde027113e948}} 
\index{gpioCtrl.c@{gpioCtrl.c}!DS401@{DS401}}
\index{DS401@{DS401}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{DS401}
{\footnotesize\ttfamily \#define DS401~14}



Definition at line 63 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_af27c1deb5033a798a9aa11e8d0b3571c}} 
\index{gpioCtrl.c@{gpioCtrl.c}!DS402@{DS402}}
\index{DS402@{DS402}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{DS402}
{\footnotesize\ttfamily \#define DS402~13}



Definition at line 64 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a5f1565bdbe9062be92c43bedaf410282}} 
\index{gpioCtrl.c@{gpioCtrl.c}!DS403@{DS403}}
\index{DS403@{DS403}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{DS403}
{\footnotesize\ttfamily \#define DS403~4}



Definition at line 65 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_aa93f0eb578d23995850d61f7d61c55c1}} 
\index{gpioCtrl.c@{gpioCtrl.c}!FALSE@{FALSE}}
\index{FALSE@{FALSE}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{FALSE}
{\footnotesize\ttfamily \#define FALSE~0}



Definition at line 69 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a4865b1861f7c5e444f1a6d28ba002efc}} 
\index{gpioCtrl.c@{gpioCtrl.c}!JOYSTICK\_A\_LEFT\_RIGHT@{JOYSTICK\_A\_LEFT\_RIGHT}}
\index{JOYSTICK\_A\_LEFT\_RIGHT@{JOYSTICK\_A\_LEFT\_RIGHT}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{JOYSTICK\_A\_LEFT\_RIGHT}
{\footnotesize\ttfamily \#define JOYSTICK\+\_\+\+A\+\_\+\+LEFT\+\_\+\+RIGHT~0x25}



Definition at line 76 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a44e0fa1b5281e183485fb5574943ff77}} 
\index{gpioCtrl.c@{gpioCtrl.c}!JOYSTICK\_A\_UP\_DOWN@{JOYSTICK\_A\_UP\_DOWN}}
\index{JOYSTICK\_A\_UP\_DOWN@{JOYSTICK\_A\_UP\_DOWN}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{JOYSTICK\_A\_UP\_DOWN}
{\footnotesize\ttfamily \#define JOYSTICK\+\_\+\+A\+\_\+\+UP\+\_\+\+DOWN~0x27}



Definition at line 77 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_afd187e43d0c3ee3adedae6ea36c55b8b}} 
\index{gpioCtrl.c@{gpioCtrl.c}!JOYSTICK\_ADDR@{JOYSTICK\_ADDR}}
\index{JOYSTICK\_ADDR@{JOYSTICK\_ADDR}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{JOYSTICK\_ADDR}
{\footnotesize\ttfamily \#define JOYSTICK\+\_\+\+ADDR~0x34}



Definition at line 71 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a80fbbbb111c9537a2dbf0a8cf7eab620}} 
\index{gpioCtrl.c@{gpioCtrl.c}!JOYSTICK\_b\_LEFT\_RIGHT@{JOYSTICK\_b\_LEFT\_RIGHT}}
\index{JOYSTICK\_b\_LEFT\_RIGHT@{JOYSTICK\_b\_LEFT\_RIGHT}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{JOYSTICK\_b\_LEFT\_RIGHT}
{\footnotesize\ttfamily \#define JOYSTICK\+\_\+b\+\_\+\+LEFT\+\_\+\+RIGHT~0x21}



Definition at line 73 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a5933666075bfec66d650a2f9174e32a6}} 
\index{gpioCtrl.c@{gpioCtrl.c}!JOYSTICK\_b\_UP\_DOWN@{JOYSTICK\_b\_UP\_DOWN}}
\index{JOYSTICK\_b\_UP\_DOWN@{JOYSTICK\_b\_UP\_DOWN}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{JOYSTICK\_b\_UP\_DOWN}
{\footnotesize\ttfamily \#define JOYSTICK\+\_\+b\+\_\+\+UP\+\_\+\+DOWN~0x23}



Definition at line 74 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_ab9e061e05d689a5769936b213022102f}} 
\index{gpioCtrl.c@{gpioCtrl.c}!MS@{MS}}
\index{MS@{MS}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{MS}
{\footnotesize\ttfamily \#define MS~1000}



Definition at line 67 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_ac944cf17252a568a93be2d8b10fa3efd}} 
\index{gpioCtrl.c@{gpioCtrl.c}!NR\_OF\_SEGMENTS@{NR\_OF\_SEGMENTS}}
\index{NR\_OF\_SEGMENTS@{NR\_OF\_SEGMENTS}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{NR\_OF\_SEGMENTS}
{\footnotesize\ttfamily \#define NR\+\_\+\+OF\+\_\+\+SEGMENTS~4}



Definition at line 50 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a2ed0e3bd148ecfdfbf67ec9e9e8dbf8d}} 
\index{gpioCtrl.c@{gpioCtrl.c}!S400@{S400}}
\index{S400@{S400}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{S400}
{\footnotesize\ttfamily \#define S400~10}



Definition at line 56 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a5097ce3d3160935fba79d32d6fb5850e}} 
\index{gpioCtrl.c@{gpioCtrl.c}!S401@{S401}}
\index{S401@{S401}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{S401}
{\footnotesize\ttfamily \#define S401~31}



Definition at line 57 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_aef63ad3a9baec32a03ad7279fbd1d7d7}} 
\index{gpioCtrl.c@{gpioCtrl.c}!S402@{S402}}
\index{S402@{S402}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{S402}
{\footnotesize\ttfamily \#define S402~15}



Definition at line 58 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a8a894d4e3dad64313462cb446e9e3204}} 
\index{gpioCtrl.c@{gpioCtrl.c}!S403@{S403}}
\index{S403@{S403}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{S403}
{\footnotesize\ttfamily \#define S403~7}



Definition at line 59 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a3bfdd5618c010f084917e7ca35a480ef}} 
\index{gpioCtrl.c@{gpioCtrl.c}!SEVEN\_SEG\_ENABLE@{SEVEN\_SEG\_ENABLE}}
\index{SEVEN\_SEG\_ENABLE@{SEVEN\_SEG\_ENABLE}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{SEVEN\_SEG\_ENABLE}
{\footnotesize\ttfamily \#define SEVEN\+\_\+\+SEG\+\_\+\+ENABLE~41}



Definition at line 53 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a8026f6e905b29a28dcfbd0b6bd1fcf83}} 
\index{gpioCtrl.c@{gpioCtrl.c}!SOCKET\_READY@{SOCKET\_READY}}
\index{SOCKET\_READY@{SOCKET\_READY}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{SOCKET\_READY}
{\footnotesize\ttfamily \#define SOCKET\+\_\+\+READY~0x\+FF}



Definition at line 79 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_aa8cecfc5c5c054d2875c03e77b7be15d}} 
\index{gpioCtrl.c@{gpioCtrl.c}!TRUE@{TRUE}}
\index{TRUE@{TRUE}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{TRUE}
{\footnotesize\ttfamily \#define TRUE~1}



Definition at line 68 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a7baab2aa5bf8eb14b6128e0f16634837}} 
\index{gpioCtrl.c@{gpioCtrl.c}!UNIX\_PATH\_MAX@{UNIX\_PATH\_MAX}}
\index{UNIX\_PATH\_MAX@{UNIX\_PATH\_MAX}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{UNIX\_PATH\_MAX}
{\footnotesize\ttfamily \#define UNIX\+\_\+\+PATH\+\_\+\+MAX~108}



Definition at line 78 of file gpio\+Ctrl.\+c.



\doxysubsection{Typedef Documentation}
\mbox{\label{gpioCtrl_8c_ab829fea61a0fe4be371dee40fdb5ffa1}} 
\index{gpioCtrl.c@{gpioCtrl.c}!gpio\_desc@{gpio\_desc}}
\index{gpio\_desc@{gpio\_desc}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{gpio\_desc}
{\footnotesize\ttfamily typedef struct \textbf{ gpio\+\_\+desc} \textbf{ gpio\+\_\+desc}}



\doxysubsection{Function Documentation}
\mbox{\label{gpioCtrl_8c_a354d299da9fc7fd6d7e4a623db14e733}} 
\index{gpioCtrl.c@{gpioCtrl.c}!controlGpioOut@{controlGpioOut}}
\index{controlGpioOut@{controlGpioOut}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{controlGpioOut()}
{\footnotesize\ttfamily int control\+Gpio\+Out (\begin{DoxyParamCaption}\item[{struct \textbf{ gpio\+\_\+desc}}]{gpio,  }\item[{int}]{value }\end{DoxyParamCaption})}



Definition at line 425 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{426 \{}
\DoxyCodeLine{427     gpio.ret = ioctl(gpio.req.fd, GPIOHANDLE\_SET\_LINE\_VALUES\_IOCTL, \&value);}
\DoxyCodeLine{428     \textcolor{keywordflow}{return} gpio.ret;}
\DoxyCodeLine{429 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_a33b91e7c15fb1e5f6ff9a36cfefcb84d}} 
\index{gpioCtrl.c@{gpioCtrl.c}!establishConnection@{establishConnection}}
\index{establishConnection@{establishConnection}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{establishConnection()}
{\footnotesize\ttfamily bool establish\+Connection (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line 532 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{533 \{}
\DoxyCodeLine{534     \textcolor{keywordtype}{int} max\_connection\_attempts = 10;}
\DoxyCodeLine{535     socket\_fd = socket(AF\_UNIX, SOCK\_STREAM, 0);}
\DoxyCodeLine{536     \textcolor{keywordflow}{if} (socket\_fd == -\/1)}
\DoxyCodeLine{537     \{}
\DoxyCodeLine{538         perror(\textcolor{stringliteral}{"{}Error creating socket"{}});}
\DoxyCodeLine{539         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{540     \}}
\DoxyCodeLine{541 }
\DoxyCodeLine{542     \textcolor{keywordflow}{while} (max\_connection\_attempts > 0)}
\DoxyCodeLine{543     \{}
\DoxyCodeLine{544         \textcolor{keywordflow}{if} (connect(socket\_fd, (\textcolor{keyword}{struct} sockaddr *)\&address, \textcolor{keyword}{sizeof}(address)) == 0)}
\DoxyCodeLine{545         \{}
\DoxyCodeLine{546             printf(\textcolor{stringliteral}{"{}Connected to the server\(\backslash\)n"{}});}
\DoxyCodeLine{547             \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \textcolor{comment}{// Exit the function with success}}
\DoxyCodeLine{548         \}}
\DoxyCodeLine{549         \textcolor{keywordflow}{else}}
\DoxyCodeLine{550         \{}
\DoxyCodeLine{551             perror(\textcolor{stringliteral}{"{}Error connecting to the server"{}});}
\DoxyCodeLine{552             max\_connection\_attempts-\/-\/;}
\DoxyCodeLine{553 }
\DoxyCodeLine{554             \textcolor{comment}{// Wait for a short duration before retrying}}
\DoxyCodeLine{555             sleep(1);}
\DoxyCodeLine{556         \}}
\DoxyCodeLine{557     \}}
\DoxyCodeLine{558 }
\DoxyCodeLine{559     \textcolor{comment}{// Connection attempts exhausted, handle the error as needed}}
\DoxyCodeLine{560     fprintf(stderr, \textcolor{stringliteral}{"{}Failed to establish a connection\(\backslash\)n"{}});}
\DoxyCodeLine{561     close(socket\_fd); \textcolor{comment}{// Close the socket if connection fails}}
\DoxyCodeLine{562     \textcolor{keywordflow}{return} \textcolor{keyword}{false};     \textcolor{comment}{// Exit the function with failure}}
\DoxyCodeLine{563 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_a31173f5f870f1b86f88276179013adad}} 
\index{gpioCtrl.c@{gpioCtrl.c}!initGpioInput@{initGpioInput}}
\index{initGpioInput@{initGpioInput}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{initGpioInput()}
{\footnotesize\ttfamily struct \textbf{ gpio\+\_\+desc} init\+Gpio\+Input (\begin{DoxyParamCaption}\item[{const char $\ast$}]{gpio\+\_\+chip,  }\item[{unsigned int}]{gpio\+\_\+line }\end{DoxyParamCaption})}



Definition at line 170 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{327 \{}
\DoxyCodeLine{328     \textcolor{keywordtype}{int} ret;}
\DoxyCodeLine{329     \textcolor{keywordtype}{int} status;}
\DoxyCodeLine{330     \textcolor{keyword}{struct }gpiohandle\_request req;}
\DoxyCodeLine{331     strcpy(chrdev\_name, gpio\_chip);}
\DoxyCodeLine{332     fd = open(chrdev\_name, 0);}
\DoxyCodeLine{333     \textcolor{keywordflow}{if} (fd == -\/1)}
\DoxyCodeLine{334     \{}
\DoxyCodeLine{335         ret = -\/errno;}
\DoxyCodeLine{336         fprintf(stderr, \textcolor{stringliteral}{"{}Failed to open \%s\(\backslash\)n"{}}, chrdev\_name);}
\DoxyCodeLine{337 }
\DoxyCodeLine{338         status = -\/1;}
\DoxyCodeLine{339     \}}
\DoxyCodeLine{340     \textcolor{keywordflow}{else}}
\DoxyCodeLine{341     \{}
\DoxyCodeLine{342         req.lineoffsets[0] = gpio\_line;}
\DoxyCodeLine{343         req.flags = GPIOHANDLE\_REQUEST\_INPUT;}
\DoxyCodeLine{344         snprintf(req.consumer\_label, \textcolor{keyword}{sizeof}(req.consumer\_label), \textcolor{stringliteral}{"{}btn\_\%u"{}}, gpio\_line);}
\DoxyCodeLine{345         req.lines = 1;}
\DoxyCodeLine{346 }
\DoxyCodeLine{347         \textcolor{comment}{// Request GPIO line}}
\DoxyCodeLine{348         ret = ioctl(fd, GPIO\_GET\_LINEHANDLE\_IOCTL, \&req);}
\DoxyCodeLine{349         \textcolor{keywordflow}{if} (ret == -\/1)}
\DoxyCodeLine{350         \{}
\DoxyCodeLine{351             ret = -\/errno;}
\DoxyCodeLine{352             fprintf(stderr, \textcolor{stringliteral}{"{}Failed to issue GET LINEHANDLE IOCTL (\%d)\(\backslash\)n"{}}, ret);}
\DoxyCodeLine{353             status = -\/1;}
\DoxyCodeLine{354         \}}
\DoxyCodeLine{355         \textcolor{comment}{// Close GPIO device (not needed after acquiring the line handle)}}
\DoxyCodeLine{356         \textcolor{keywordflow}{if} (close(fd) == -\/1)}
\DoxyCodeLine{357         \{}
\DoxyCodeLine{358             perror(\textcolor{stringliteral}{"{}Failed to close GPIO character device file"{}});}
\DoxyCodeLine{359             status = -\/1;}
\DoxyCodeLine{360         \}}
\DoxyCodeLine{361         \textcolor{keywordflow}{else}}
\DoxyCodeLine{362         \{}
\DoxyCodeLine{363             status = 0;}
\DoxyCodeLine{364         \}}
\DoxyCodeLine{365     \}}
\DoxyCodeLine{366     \textcolor{keyword}{struct }gpio\_desc gpio;}
\DoxyCodeLine{367     strcpy(gpio.gpiobank, gpio\_chip);}
\DoxyCodeLine{368     gpio.direction = 0;}
\DoxyCodeLine{369     gpio.req = req;}
\DoxyCodeLine{370     gpio.ret = ret;}
\DoxyCodeLine{371     gpio.status = status;}
\DoxyCodeLine{372     \textcolor{keywordflow}{return} gpio;}
\DoxyCodeLine{373 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_af59cbef0dd16bd0827fa9e20cf254fe6}} 
\index{gpioCtrl.c@{gpioCtrl.c}!initGpioOutput@{initGpioOutput}}
\index{initGpioOutput@{initGpioOutput}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{initGpioOutput()}
{\footnotesize\ttfamily struct \textbf{ gpio\+\_\+desc} init\+Gpio\+Output (\begin{DoxyParamCaption}\item[{const char $\ast$}]{gpio\+\_\+chip,  }\item[{unsigned int}]{gpio\+\_\+line }\end{DoxyParamCaption})}



Definition at line 170 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{376 \{}
\DoxyCodeLine{377     \textcolor{keywordtype}{int} ret;}
\DoxyCodeLine{378     \textcolor{keywordtype}{int} status;}
\DoxyCodeLine{379     \textcolor{keyword}{struct }gpiohandle\_request req;}
\DoxyCodeLine{380     \textcolor{keyword}{static} \textcolor{keyword}{struct }gpiohandle\_data data;}
\DoxyCodeLine{381 }
\DoxyCodeLine{382     \textcolor{comment}{// /*  Open gpio device: gpiochipX */}}
\DoxyCodeLine{383     strcpy(chrdev\_name, gpio\_chip);}
\DoxyCodeLine{384     fd = open(chrdev\_name, 0);}
\DoxyCodeLine{385     \textcolor{keywordflow}{if} (fd == -\/1)}
\DoxyCodeLine{386     \{}
\DoxyCodeLine{387         ret = -\/errno;}
\DoxyCodeLine{388         fprintf(stderr, \textcolor{stringliteral}{"{}Failed to open \%s\(\backslash\)n"{}}, chrdev\_name);}
\DoxyCodeLine{389         status = -\/1;}
\DoxyCodeLine{390     \}}
\DoxyCodeLine{391     \textcolor{keywordflow}{else}}
\DoxyCodeLine{392     \{}
\DoxyCodeLine{393         \textcolor{comment}{/* Setup variables for a request */}}
\DoxyCodeLine{394         req.lineoffsets[0] = gpio\_line;}
\DoxyCodeLine{395         req.flags = GPIOHANDLE\_REQUEST\_OUTPUT;}
\DoxyCodeLine{396         memcpy(req.default\_values, \&data, \textcolor{keyword}{sizeof}(req.default\_values));}
\DoxyCodeLine{397         snprintf(req.consumer\_label, \textcolor{keyword}{sizeof}(req.consumer\_label), \textcolor{stringliteral}{"{}led\_\%u"{}}, gpio\_line);}
\DoxyCodeLine{398         req.lines = 1;}
\DoxyCodeLine{399 }
\DoxyCodeLine{400         \textcolor{comment}{/* Request GPIO line: GPIO\_H\_11 -\/-\/> LED-\/DS400 */}}
\DoxyCodeLine{401         ret = ioctl(fd, GPIO\_GET\_LINEHANDLE\_IOCTL, \&req);}
\DoxyCodeLine{402         \textcolor{keywordflow}{if} (ret == -\/1)}
\DoxyCodeLine{403         \{}
\DoxyCodeLine{404             ret = -\/errno;}
\DoxyCodeLine{405             status = -\/1;}
\DoxyCodeLine{406             fprintf(stderr, \textcolor{stringliteral}{"{}Failed to issue GET LINEHANDLE IOCTL (\%d)\(\backslash\)n"{}},}
\DoxyCodeLine{407                     ret);}
\DoxyCodeLine{408         \}}
\DoxyCodeLine{409         \textcolor{keywordflow}{if} (close(fd) == -\/1)}
\DoxyCodeLine{410         \{}
\DoxyCodeLine{411             perror(\textcolor{stringliteral}{"{}Failed to close GPIO character device file"{}});}
\DoxyCodeLine{412             status = -\/1;}
\DoxyCodeLine{413         \}}
\DoxyCodeLine{414     \}}
\DoxyCodeLine{415     \textcolor{comment}{// printf("{}prout4!\(\backslash\)n"{});}}
\DoxyCodeLine{416     \textcolor{keyword}{struct }gpio\_desc gpio;}
\DoxyCodeLine{417     strcpy(gpio.gpiobank, gpio\_chip);}
\DoxyCodeLine{418     gpio.direction = 1;}
\DoxyCodeLine{419     gpio.req = req;}
\DoxyCodeLine{420     gpio.ret = ret;}
\DoxyCodeLine{421     gpio.status = status;}
\DoxyCodeLine{422     \textcolor{keywordflow}{return} gpio;}
\DoxyCodeLine{423 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_a840291bc02cba5474a4cb46a9b9566fe}} 
\index{gpioCtrl.c@{gpioCtrl.c}!main@{main}}
\index{main@{main}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{main()}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line 170 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{171 \{}
\DoxyCodeLine{172     \textcolor{comment}{/* Register signal and signal handler */}}
\DoxyCodeLine{173     signal(SIGINT, signal\_callback\_handler);}
\DoxyCodeLine{174 }
\DoxyCodeLine{175     \textcolor{comment}{// I2c init}}
\DoxyCodeLine{176     i2c\_fd = open(I2C\_DEVICE, O\_RDWR);}
\DoxyCodeLine{177     \textcolor{keywordflow}{if} (i2c\_fd < 0)}
\DoxyCodeLine{178     \{}
\DoxyCodeLine{179         perror(\textcolor{stringliteral}{"{}i2cOpen"{}});}
\DoxyCodeLine{180         printf(\textcolor{stringliteral}{"{}No such device found!\(\backslash\)n"{}});}
\DoxyCodeLine{181         \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{182     \}}
\DoxyCodeLine{183     \textcolor{comment}{/* Set the I2C slave address for all subsequent I2C device transfers */}}
\DoxyCodeLine{184     \textcolor{keywordflow}{if} (ioctl(i2c\_fd, I2C\_SLAVE\_FORCE, JOYSTICK\_ADDR) < 0)}
\DoxyCodeLine{185     \{}
\DoxyCodeLine{186         perror(\textcolor{stringliteral}{"{}i2cSetAddress"{}});}
\DoxyCodeLine{187         \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{188     \}}
\DoxyCodeLine{189 }
\DoxyCodeLine{190     \textcolor{comment}{// BTN init}}
\DoxyCodeLine{191     \textcolor{keyword}{struct }gpio\_desc s400 = initGpioInput(GPIO\_BANK1, S400);}
\DoxyCodeLine{192     \textcolor{keywordflow}{if} (s400.status < 0)}
\DoxyCodeLine{193     \{}
\DoxyCodeLine{194         printf(\textcolor{stringliteral}{"{}Error init S400"{}});}
\DoxyCodeLine{195     \}}
\DoxyCodeLine{196     \textcolor{keyword}{struct }gpio\_desc s401 = initGpioInput(GPIO\_BANK1, S401);}
\DoxyCodeLine{197     \textcolor{keywordflow}{if} (s401.status < 0)}
\DoxyCodeLine{198     \{}
\DoxyCodeLine{199         printf(\textcolor{stringliteral}{"{}Error init S401"{}});}
\DoxyCodeLine{200     \}}
\DoxyCodeLine{201     \textcolor{keyword}{struct }gpio\_desc s402 = initGpioInput(GPIO\_BANK1, S402);}
\DoxyCodeLine{202     \textcolor{keywordflow}{if} (s402.status < 0)}
\DoxyCodeLine{203     \{}
\DoxyCodeLine{204         printf(\textcolor{stringliteral}{"{}Error init S402"{}});}
\DoxyCodeLine{205     \}}
\DoxyCodeLine{206     \textcolor{keyword}{struct }gpio\_desc s403 = initGpioInput(GPIO\_BANK3, S403);}
\DoxyCodeLine{207     \textcolor{keywordflow}{if} (s403.status < 0)}
\DoxyCodeLine{208     \{}
\DoxyCodeLine{209         printf(\textcolor{stringliteral}{"{}Error init S403"{}});}
\DoxyCodeLine{210     \}}
\DoxyCodeLine{211 }
\DoxyCodeLine{212     \textcolor{comment}{// LED init}}
\DoxyCodeLine{213     \textcolor{keyword}{struct }gpio\_desc ds400 = initGpioOutput(GPIO\_BANK1, DS400);}
\DoxyCodeLine{214     \textcolor{keywordflow}{if} (ds400.status < 0)}
\DoxyCodeLine{215     \{}
\DoxyCodeLine{216         printf(\textcolor{stringliteral}{"{}Error init ds400"{}});}
\DoxyCodeLine{217     \}}
\DoxyCodeLine{218     \textcolor{keyword}{struct }gpio\_desc ds401 = initGpioOutput(GPIO\_BANK3, DS401);}
\DoxyCodeLine{219     \textcolor{keywordflow}{if} (ds401.status < 0)}
\DoxyCodeLine{220     \{}
\DoxyCodeLine{221         printf(\textcolor{stringliteral}{"{}Error init ds400"{}});}
\DoxyCodeLine{222     \}}
\DoxyCodeLine{223     \textcolor{keyword}{struct }gpio\_desc ds402 = initGpioOutput(GPIO\_BANK3, DS402);}
\DoxyCodeLine{224     \textcolor{keywordflow}{if} (ds402.status < 0)}
\DoxyCodeLine{225     \{}
\DoxyCodeLine{226         printf(\textcolor{stringliteral}{"{}Error init ds400"{}});}
\DoxyCodeLine{227     \}}
\DoxyCodeLine{228     \textcolor{keyword}{struct }gpio\_desc ds403 = initGpioOutput(GPIO\_BANK3, DS403);}
\DoxyCodeLine{229     \textcolor{keywordflow}{if} (ds403.status < 0)}
\DoxyCodeLine{230     \{}
\DoxyCodeLine{231         printf(\textcolor{stringliteral}{"{}Error init ds400"{}});}
\DoxyCodeLine{232     \}}
\DoxyCodeLine{233 }
\DoxyCodeLine{234     \textcolor{comment}{// Specify the socket file path}}
\DoxyCodeLine{235     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *socket\_path = \textcolor{stringliteral}{"{}/tmp/socket"{}};}
\DoxyCodeLine{236     memset(\&address, 0, \textcolor{keyword}{sizeof}(address));}
\DoxyCodeLine{237     address.sun\_family = AF\_UNIX;}
\DoxyCodeLine{238     strncpy(address.sun\_path, socket\_path, UNIX\_PATH\_MAX -\/ 1);}
\DoxyCodeLine{239 }
\DoxyCodeLine{240     \textcolor{keywordtype}{char} buffer[256];}
\DoxyCodeLine{241     \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{242     uint8\_t valueToSend;}
\DoxyCodeLine{243 }
\DoxyCodeLine{244     \textcolor{keywordflow}{if} (!establishConnection())}
\DoxyCodeLine{245     \{}
\DoxyCodeLine{246         \textcolor{comment}{// Handle the failure appropriately}}
\DoxyCodeLine{247         \textcolor{comment}{// cleanupRelease();}}
\DoxyCodeLine{248         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{249     \}}
\DoxyCodeLine{250     \textcolor{keywordflow}{else}}
\DoxyCodeLine{251     \{}
\DoxyCodeLine{252         runSocket = \textcolor{keyword}{true};}
\DoxyCodeLine{253         \textcolor{comment}{// valueToSend = SOCKET\_READY;}}
\DoxyCodeLine{254     \}}
\DoxyCodeLine{255 }
\DoxyCodeLine{256     \textcolor{keywordflow}{while} (running)}
\DoxyCodeLine{257     \{}
\DoxyCodeLine{258         inputState = 0x00;}
\DoxyCodeLine{259         \textcolor{keywordtype}{int} swVal = 1;}
\DoxyCodeLine{260 }
\DoxyCodeLine{261         inputState = readADCs();}
\DoxyCodeLine{262         swVal = readBtn(s400);}
\DoxyCodeLine{263         controlGpioOut(ds403, swVal);}
\DoxyCodeLine{264         \textcolor{keywordflow}{if} (swVal == 0)}
\DoxyCodeLine{265         \{}
\DoxyCodeLine{266             inputState |= startPressed;}
\DoxyCodeLine{267             printf(\textcolor{stringliteral}{"{}Switch S400 active\(\backslash\)n"{}});}
\DoxyCodeLine{268         \}}
\DoxyCodeLine{269         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (swVal < 0)}
\DoxyCodeLine{270         \{}
\DoxyCodeLine{271             printf(\textcolor{stringliteral}{"{}Error"{}});}
\DoxyCodeLine{272         \}}
\DoxyCodeLine{273 }
\DoxyCodeLine{274         swVal = 1;}
\DoxyCodeLine{275         swVal = readBtn(s401);}
\DoxyCodeLine{276         controlGpioOut(ds402, swVal);}
\DoxyCodeLine{277         \textcolor{keywordflow}{if} (swVal == 0)}
\DoxyCodeLine{278         \{}
\DoxyCodeLine{279             inputState |= selectPressed;}
\DoxyCodeLine{280             \textcolor{comment}{// printf("{}Switch S401 active\(\backslash\)n"{});}}
\DoxyCodeLine{281         \}}
\DoxyCodeLine{282         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (swVal < 0)}
\DoxyCodeLine{283         \{}
\DoxyCodeLine{284             printf(\textcolor{stringliteral}{"{}Error"{}});}
\DoxyCodeLine{285         \}}
\DoxyCodeLine{286         swVal = 1;}
\DoxyCodeLine{287         swVal = readBtn(s402);}
\DoxyCodeLine{288         controlGpioOut(ds401, swVal);}
\DoxyCodeLine{289         \textcolor{keywordflow}{if} (swVal == 0)}
\DoxyCodeLine{290         \{}
\DoxyCodeLine{291             inputState |= aPressed;}
\DoxyCodeLine{292             \textcolor{comment}{// printf("{}Switch S402 active\(\backslash\)n"{});}}
\DoxyCodeLine{293         \}}
\DoxyCodeLine{294         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (swVal < 0)}
\DoxyCodeLine{295         \{}
\DoxyCodeLine{296             printf(\textcolor{stringliteral}{"{}Error"{}});}
\DoxyCodeLine{297         \}}
\DoxyCodeLine{298         swVal = 1;}
\DoxyCodeLine{299         swVal = readBtn(s403);}
\DoxyCodeLine{300         controlGpioOut(ds400, swVal);}
\DoxyCodeLine{301         \textcolor{keywordflow}{if} (swVal == 0)}
\DoxyCodeLine{302         \{}
\DoxyCodeLine{303             inputState |= bPressed;}
\DoxyCodeLine{304             \textcolor{comment}{// printf("{}Switch S403 active\(\backslash\)n"{});}}
\DoxyCodeLine{305         \}}
\DoxyCodeLine{306         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (swVal < 0)}
\DoxyCodeLine{307         \{}
\DoxyCodeLine{308             printf(\textcolor{stringliteral}{"{}Error"{}});}
\DoxyCodeLine{309         \}}
\DoxyCodeLine{310         swVal = 1;}
\DoxyCodeLine{311 }
\DoxyCodeLine{312         printf(\textcolor{stringliteral}{"{}ready to write"{}});}
\DoxyCodeLine{313         n = write(socket\_fd, \&inputState, \textcolor{keyword}{sizeof}(inputState));}
\DoxyCodeLine{314         \textcolor{keywordflow}{if} (n < 0)}
\DoxyCodeLine{315         \{}
\DoxyCodeLine{316             \textcolor{comment}{// perror("{}ERROR writing to socket"{});}}
\DoxyCodeLine{317             \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{318         \}}
\DoxyCodeLine{319         printf(\textcolor{stringliteral}{"{}input state: 0x\%02X\(\backslash\)n"{}}, inputState);}
\DoxyCodeLine{320     \}}
\DoxyCodeLine{321 }
\DoxyCodeLine{322     close(adc\_fd);}
\DoxyCodeLine{323     \textcolor{keywordflow}{return} EXIT\_SUCCESS;}
\DoxyCodeLine{324 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_a0d90c79933c0330321baf50da77b6973}} 
\index{gpioCtrl.c@{gpioCtrl.c}!readADCs@{readADCs}}
\index{readADCs@{readADCs}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{readADCs()}
{\footnotesize\ttfamily uint8\+\_\+t read\+ADCs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 483 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{484 \{}
\DoxyCodeLine{485     uint8\_t adcValue;}
\DoxyCodeLine{486     uint8\_t adcState = 0x00;}
\DoxyCodeLine{487 }
\DoxyCodeLine{488     \textcolor{keywordflow}{if} (setUpAdcValue(JOYSTICK\_A\_UP\_DOWN) < 0)}
\DoxyCodeLine{489     \{}
\DoxyCodeLine{490         perror(\textcolor{stringliteral}{"{}Setup ADC"{}});}
\DoxyCodeLine{491         \textcolor{keywordflow}{return} errorCode;}
\DoxyCodeLine{492         \textcolor{comment}{// isReading = false;}}
\DoxyCodeLine{493     \}}
\DoxyCodeLine{494     adcValue = readAdcValue();}
\DoxyCodeLine{495     printf(\textcolor{stringliteral}{"{}U/D Value: \%d\(\backslash\)n"{}}, adcValue);}
\DoxyCodeLine{496 }
\DoxyCodeLine{497     \textcolor{keywordflow}{if} (adcValue >= joystickUpReading)}
\DoxyCodeLine{498     \{}
\DoxyCodeLine{499         adcState |= joystickUp;}
\DoxyCodeLine{500     \}}
\DoxyCodeLine{501     \textcolor{keywordflow}{if} (adcValue <= joystickLeftReading)}
\DoxyCodeLine{502     \{}
\DoxyCodeLine{503         adcState |= joystickDown;}
\DoxyCodeLine{504     \}}
\DoxyCodeLine{505 }
\DoxyCodeLine{506     sleep\_ms(20);}
\DoxyCodeLine{507     \textcolor{keywordflow}{if} (setUpAdcValue(JOYSTICK\_A\_LEFT\_RIGHT) < 0)}
\DoxyCodeLine{508     \{}
\DoxyCodeLine{509         perror(\textcolor{stringliteral}{"{}Setup ADC"{}});}
\DoxyCodeLine{510         \textcolor{comment}{// isReading = false;}}
\DoxyCodeLine{511         \textcolor{keywordflow}{return} errorCode;}
\DoxyCodeLine{512     \}}
\DoxyCodeLine{513 }
\DoxyCodeLine{514     adcValue = readAdcValue();}
\DoxyCodeLine{515     \textcolor{keywordflow}{if} (adcValue >= joystickRightReading)}
\DoxyCodeLine{516     \{}
\DoxyCodeLine{517         adcState |= joystickRight;}
\DoxyCodeLine{518     \}}
\DoxyCodeLine{519     \textcolor{keywordflow}{if} (adcValue <= joystickLeftReading)}
\DoxyCodeLine{520     \{}
\DoxyCodeLine{521         adcState |= joystickLeft;}
\DoxyCodeLine{522     \}}
\DoxyCodeLine{523     printf(\textcolor{stringliteral}{"{}L/R Value: \%d\(\backslash\)n"{}}, adcValue);}
\DoxyCodeLine{524 }
\DoxyCodeLine{525     sleep\_ms(10);}
\DoxyCodeLine{526     \textcolor{keywordflow}{return} adcState;}
\DoxyCodeLine{527 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_a5f42c4eb1231dcc9baaac8ff1bcc1a4e}} 
\index{gpioCtrl.c@{gpioCtrl.c}!readAdcValue@{readAdcValue}}
\index{readAdcValue@{readAdcValue}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{readAdcValue()}
{\footnotesize\ttfamily int read\+Adc\+Value (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 469 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{470 \{}
\DoxyCodeLine{471     \textcolor{keywordflow}{if} (read(i2c\_fd, i2cCommBuffer, 1) != 1)}
\DoxyCodeLine{472     \{}
\DoxyCodeLine{473         perror(\textcolor{stringliteral}{"{}read error"{}});}
\DoxyCodeLine{474         close(i2c\_fd);}
\DoxyCodeLine{475         \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{476     \}}
\DoxyCodeLine{477     uint8\_t value = i2cCommBuffer[0];}
\DoxyCodeLine{478     \textcolor{keywordflow}{return} value;}
\DoxyCodeLine{479 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_a53a992b5641394991e05700195915939}} 
\index{gpioCtrl.c@{gpioCtrl.c}!readBtn@{readBtn}}
\index{readBtn@{readBtn}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{readBtn()}
{\footnotesize\ttfamily int read\+Btn (\begin{DoxyParamCaption}\item[{struct \textbf{ gpio\+\_\+desc}}]{gpio }\end{DoxyParamCaption})}



Definition at line 431 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{432 \{}
\DoxyCodeLine{433     \textcolor{keywordtype}{int} value\_switch = 0;}
\DoxyCodeLine{434     gpio.ret = ioctl(gpio.req.fd, GPIOHANDLE\_GET\_LINE\_VALUES\_IOCTL, \&value\_switch);}
\DoxyCodeLine{435     \textcolor{keywordflow}{if} (gpio.ret == -\/1)}
\DoxyCodeLine{436     \{}
\DoxyCodeLine{437         gpio.ret = -\/errno;}
\DoxyCodeLine{438         value\_switch = -\/1;}
\DoxyCodeLine{439         fprintf(stderr, \textcolor{stringliteral}{"{}Failed to get line values(\%d)\(\backslash\)n"{}}, gpio.ret);}
\DoxyCodeLine{440     \}}
\DoxyCodeLine{441     \textcolor{keywordflow}{return} value\_switch;}
\DoxyCodeLine{442 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_ada37e8090ffec652b5d0b32718c7d400}} 
\index{gpioCtrl.c@{gpioCtrl.c}!readInputs@{readInputs}}
\index{readInputs@{readInputs}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{readInputs()}
{\footnotesize\ttfamily uint8\+\_\+t read\+Inputs (\begin{DoxyParamCaption}\item[{struct \textbf{ gpio\+\_\+desc}}]{s400,  }\item[{struct \textbf{ gpio\+\_\+desc}}]{s401,  }\item[{struct \textbf{ gpio\+\_\+desc}}]{s402,  }\item[{struct \textbf{ gpio\+\_\+desc}}]{s403,  }\item[{struct \textbf{ gpio\+\_\+desc}}]{ds400,  }\item[{struct \textbf{ gpio\+\_\+desc}}]{ds401,  }\item[{struct \textbf{ gpio\+\_\+desc}}]{ds402,  }\item[{struct \textbf{ gpio\+\_\+desc}}]{ds403 }\end{DoxyParamCaption})}

\mbox{\label{gpioCtrl_8c_a3ee6a36caaf11a81268ff9bf3d9e5b31}} 
\index{gpioCtrl.c@{gpioCtrl.c}!setUpAdcValue@{setUpAdcValue}}
\index{setUpAdcValue@{setUpAdcValue}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{setUpAdcValue()}
{\footnotesize\ttfamily int set\+Up\+Adc\+Value (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{setup }\end{DoxyParamCaption})}



Definition at line 454 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{455 \{}
\DoxyCodeLine{456     i2cCommBuffer[0] = setup;}
\DoxyCodeLine{457     \textcolor{keywordflow}{if} (write(i2c\_fd, i2cCommBuffer, 1) != 1)}
\DoxyCodeLine{458     \{}
\DoxyCodeLine{459         perror(\textcolor{stringliteral}{"{}write error!"{}});}
\DoxyCodeLine{460         close(i2c\_fd);}
\DoxyCodeLine{461         \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{462     \}}
\DoxyCodeLine{463     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{464 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_a89a8322bea357674e81ba9cbdefe0378}} 
\index{gpioCtrl.c@{gpioCtrl.c}!signal\_callback\_handler@{signal\_callback\_handler}}
\index{signal\_callback\_handler@{signal\_callback\_handler}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{signal\_callback\_handler()}
{\footnotesize\ttfamily void signal\+\_\+callback\+\_\+handler (\begin{DoxyParamCaption}\item[{int}]{signum }\end{DoxyParamCaption})}



Definition at line 444 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{445 \{}
\DoxyCodeLine{446     \textcolor{comment}{/* Set termination flag */}}
\DoxyCodeLine{447     running = \textcolor{keyword}{false};}
\DoxyCodeLine{448     printf(\textcolor{stringliteral}{"{}\(\backslash\)nProgram terminated by Ctrl-\/C!\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{449 \}}

\end{DoxyCode}
\mbox{\label{gpioCtrl_8c_a73a8d7e98be85f67961ca682c291033a}} 
\index{gpioCtrl.c@{gpioCtrl.c}!sleep\_ms@{sleep\_ms}}
\index{sleep\_ms@{sleep\_ms}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{sleep\_ms()}
{\footnotesize\ttfamily void sleep\+\_\+ms (\begin{DoxyParamCaption}\item[{int}]{milliseconds }\end{DoxyParamCaption})}



Definition at line 567 of file gpio\+Ctrl.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{568 \{}
\DoxyCodeLine{569     usleep(milliseconds * 1000);}
\DoxyCodeLine{570 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\label{gpioCtrl_8c_ae9759f4d6dd77bccbcb939f561e8648b}} 
\index{gpioCtrl.c@{gpioCtrl.c}!adc\_fd@{adc\_fd}}
\index{adc\_fd@{adc\_fd}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{adc\_fd}
{\footnotesize\ttfamily int adc\+\_\+fd}



Definition at line 140 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a8c250acbc4fb1221f3c4cabcd390daf9}} 
\index{gpioCtrl.c@{gpioCtrl.c}!adcBuffer@{adcBuffer}}
\index{adcBuffer@{adcBuffer}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{adcBuffer}
{\footnotesize\ttfamily char adc\+Buffer[\textbf{ BUFFER\+\_\+\+SIZE}]}



Definition at line 142 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_ab78b105450f938524655ee31739376d8}} 
\index{gpioCtrl.c@{gpioCtrl.c}!address@{address}}
\index{address@{address}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{address}
{\footnotesize\ttfamily struct sockaddr\+\_\+un address}



Definition at line 162 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_aadbe3f46cb9fda2f51397694a26e107e}} 
\index{gpioCtrl.c@{gpioCtrl.c}!aPressed@{aPressed}}
\index{aPressed@{aPressed}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{aPressed}
{\footnotesize\ttfamily uint8\+\_\+t a\+Pressed = 0x20}



Definition at line 99 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a09b0b4db4917dceaf779bdfa0d4c5b42}} 
\index{gpioCtrl.c@{gpioCtrl.c}!bPressed@{bPressed}}
\index{bPressed@{bPressed}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{bPressed}
{\footnotesize\ttfamily uint8\+\_\+t b\+Pressed = 0x10}



Definition at line 100 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_aca06edc2b3b6736824d15209c0fbaa12}} 
\index{gpioCtrl.c@{gpioCtrl.c}!charRead@{charRead}}
\index{charRead@{charRead}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{charRead}
{\footnotesize\ttfamily int char\+Read}



Definition at line 141 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_ab793fe8290afe0eb36e4cea6b4dbf6fd}} 
\index{gpioCtrl.c@{gpioCtrl.c}!chrdev\_name@{chrdev\_name}}
\index{chrdev\_name@{chrdev\_name}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{chrdev\_name}
{\footnotesize\ttfamily char chrdev\+\_\+name[20]\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 124 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_abea449a895aa94f257f9208d671d4557}} 
\index{gpioCtrl.c@{gpioCtrl.c}!devID@{devID}}
\index{devID@{devID}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{devID}
{\footnotesize\ttfamily uint8\+\_\+t dev\+ID\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 115 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a6e291360a5fec5135de1c8fc39356588}} 
\index{gpioCtrl.c@{gpioCtrl.c}!errorCode@{errorCode}}
\index{errorCode@{errorCode}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{errorCode}
{\footnotesize\ttfamily uint8\+\_\+t error\+Code = 0x\+FF}



Definition at line 101 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a731685fafbd56ca07bb8aedc93ff0301}} 
\index{gpioCtrl.c@{gpioCtrl.c}!fd@{fd}}
\index{fd@{fd}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{fd}
{\footnotesize\ttfamily static int fd\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 117 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a5b416045e596c49d45b0f20cf0d508ae}} 
\index{gpioCtrl.c@{gpioCtrl.c}!GPIO\_BANK1@{GPIO\_BANK1}}
\index{GPIO\_BANK1@{GPIO\_BANK1}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{GPIO\_BANK1}
{\footnotesize\ttfamily const char GPIO\+\_\+\+BANK1[$\,$] = \char`\"{}/dev/gpiochip1\char`\"{}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 119 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_ae55b09b25a4ac5926b5c4a863d6d8f49}} 
\index{gpioCtrl.c@{gpioCtrl.c}!GPIO\_BANK3@{GPIO\_BANK3}}
\index{GPIO\_BANK3@{GPIO\_BANK3}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{GPIO\_BANK3}
{\footnotesize\ttfamily const char GPIO\+\_\+\+BANK3[$\,$] = \char`\"{}/dev/gpiochip3\char`\"{}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 120 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_af00bbf8a436e5853c2bcf182ec7e67a3}} 
\index{gpioCtrl.c@{gpioCtrl.c}!I2C\_DEVICE@{I2C\_DEVICE}}
\index{I2C\_DEVICE@{I2C\_DEVICE}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{I2C\_DEVICE}
{\footnotesize\ttfamily const char I2\+C\+\_\+\+DEVICE[$\,$] = \char`\"{}/dev/i2c-\/0\char`\"{}}



Definition at line 122 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a1c1c2753f354efefbda98508d811e6a9}} 
\index{gpioCtrl.c@{gpioCtrl.c}!i2c\_fd@{i2c\_fd}}
\index{i2c\_fd@{i2c\_fd}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{i2c\_fd}
{\footnotesize\ttfamily int32\+\_\+t i2c\+\_\+fd\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 112 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a457fa3c034a80f5ea3581a0983b91b5b}} 
\index{gpioCtrl.c@{gpioCtrl.c}!i2cCommBuffer@{i2cCommBuffer}}
\index{i2cCommBuffer@{i2cCommBuffer}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{i2cCommBuffer}
{\footnotesize\ttfamily uint8\+\_\+t i2c\+Comm\+Buffer[8]\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 114 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_ad4d162deca5410aa3053fb53d45b9a0c}} 
\index{gpioCtrl.c@{gpioCtrl.c}!inputState@{inputState}}
\index{inputState@{inputState}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{inputState}
{\footnotesize\ttfamily int8\+\_\+t input\+State = 0x00}



Definition at line 85 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a1173377d274544da594ce36072ab77eb}} 
\index{gpioCtrl.c@{gpioCtrl.c}!joystickDown@{joystickDown}}
\index{joystickDown@{joystickDown}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{joystickDown}
{\footnotesize\ttfamily uint8\+\_\+t joystick\+Down = 0x04}



Definition at line 93 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a3afbb588f5e18d86d49946b1e2f97ff9}} 
\index{gpioCtrl.c@{gpioCtrl.c}!joystickDownReading@{joystickDownReading}}
\index{joystickDownReading@{joystickDownReading}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{joystickDownReading}
{\footnotesize\ttfamily uint8\+\_\+t joystick\+Down\+Reading = 0x\+F4}



Definition at line 88 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a214ecae7321fce1823d14d141aa61013}} 
\index{gpioCtrl.c@{gpioCtrl.c}!joystickLeft@{joystickLeft}}
\index{joystickLeft@{joystickLeft}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{joystickLeft}
{\footnotesize\ttfamily uint8\+\_\+t joystick\+Left = 0x01}



Definition at line 95 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a15dfd856c0e55bc6b6caee2bcfe435fb}} 
\index{gpioCtrl.c@{gpioCtrl.c}!joystickLeftReading@{joystickLeftReading}}
\index{joystickLeftReading@{joystickLeftReading}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{joystickLeftReading}
{\footnotesize\ttfamily uint8\+\_\+t joystick\+Left\+Reading = 0x\+F4}



Definition at line 90 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a761caf543bb231127b27a010da572042}} 
\index{gpioCtrl.c@{gpioCtrl.c}!joystickRight@{joystickRight}}
\index{joystickRight@{joystickRight}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{joystickRight}
{\footnotesize\ttfamily uint8\+\_\+t joystick\+Right = 0x02}



Definition at line 94 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a0844739acf749da67371af570eafb976}} 
\index{gpioCtrl.c@{gpioCtrl.c}!joystickRightReading@{joystickRightReading}}
\index{joystickRightReading@{joystickRightReading}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{joystickRightReading}
{\footnotesize\ttfamily uint8\+\_\+t joystick\+Right\+Reading = 0x\+FA}



Definition at line 89 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_ae5731b9a6287630487dc7a2508bb85d6}} 
\index{gpioCtrl.c@{gpioCtrl.c}!joystickUp@{joystickUp}}
\index{joystickUp@{joystickUp}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{joystickUp}
{\footnotesize\ttfamily uint8\+\_\+t joystick\+Up = 0x08}



Definition at line 92 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a6cc9dc8f25c91fc5ff953d988760453a}} 
\index{gpioCtrl.c@{gpioCtrl.c}!joystickUpReading@{joystickUpReading}}
\index{joystickUpReading@{joystickUpReading}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{joystickUpReading}
{\footnotesize\ttfamily uint8\+\_\+t joystick\+Up\+Reading = 0x\+FA}



Definition at line 87 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a6778c8d1b94a7eac00f523ade51530c0}} 
\index{gpioCtrl.c@{gpioCtrl.c}!revID@{revID}}
\index{revID@{revID}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{revID}
{\footnotesize\ttfamily uint8\+\_\+t rev\+ID\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 115 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a36f7b6be7108281af77939ceaec42fd6}} 
\index{gpioCtrl.c@{gpioCtrl.c}!running@{running}}
\index{running@{running}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{running}
{\footnotesize\ttfamily bool running = true\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 109 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a54eecd224ad5e4dbd5ec95e7e3f339ea}} 
\index{gpioCtrl.c@{gpioCtrl.c}!runSocket@{runSocket}}
\index{runSocket@{runSocket}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{runSocket}
{\footnotesize\ttfamily bool run\+Socket = true}



Definition at line 162 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_af1f465210789fcff6b93dfdb9733a908}} 
\index{gpioCtrl.c@{gpioCtrl.c}!selectPressed@{selectPressed}}
\index{selectPressed@{selectPressed}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{selectPressed}
{\footnotesize\ttfamily uint8\+\_\+t select\+Pressed = 0x40}



Definition at line 98 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_ad02424c03e4b1b3ddbdb78d829489ac3}} 
\index{gpioCtrl.c@{gpioCtrl.c}!socket\_fd@{socket\_fd}}
\index{socket\_fd@{socket\_fd}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{socket\_fd}
{\footnotesize\ttfamily int socket\+\_\+fd}



Definition at line 165 of file gpio\+Ctrl.\+c.

\mbox{\label{gpioCtrl_8c_a60fbc4a50ab1f188bedb335c1985f752}} 
\index{gpioCtrl.c@{gpioCtrl.c}!startPressed@{startPressed}}
\index{startPressed@{startPressed}!gpioCtrl.c@{gpioCtrl.c}}
\doxysubsubsection{startPressed}
{\footnotesize\ttfamily uint8\+\_\+t start\+Pressed = 0x80}



Definition at line 97 of file gpio\+Ctrl.\+c.

