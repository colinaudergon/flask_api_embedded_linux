\doxysection{src/main.c File Reference}
\label{main_8c}\index{src/main.c@{src/main.c}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$fcntl.\+h$>$}\newline
{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$linux/fb.\+h$>$}\newline
{\ttfamily \#include $<$sys/mman.\+h$>$}\newline
{\ttfamily \#include $<$sys/ioctl.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include $<$sys/stat.\+h$>$}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ RGB\+\_\+\+COLOR}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \textbf{ CONVERT\+\_\+\+RGB24}(red,  green,  blue)~  ((red $<$$<$ 16) $\vert$ (green $<$$<$ 8) $\vert$ (blue))
\item 
\#define \textbf{ BPP32}~32
\item 
\#define \textbf{ BLACK}~\textbf{ CONVERT\+\_\+\+RGB24}(0, 0, 0)
\item 
\#define \textbf{ RED}~\textbf{ CONVERT\+\_\+\+RGB24}(255, 0, 0)
\item 
\#define \textbf{ GREEN}~\textbf{ CONVERT\+\_\+\+RGB24}(0, 255, 0)
\item 
\#define \textbf{ YELLOW}~\textbf{ CONVERT\+\_\+\+RGB24}(255, 255, 0)
\item 
\#define \textbf{ BLUE}~\textbf{ CONVERT\+\_\+\+RGB24}(0, 0, 255)
\item 
\#define \textbf{ MAGENTA}~\textbf{ CONVERT\+\_\+\+RGB24}(255, 0, 255)
\item 
\#define \textbf{ CYAN}~\textbf{ CONVERT\+\_\+\+RGB24}(0, 255, 255)
\item 
\#define \textbf{ GREY}~\textbf{ CONVERT\+\_\+\+RGB24}(192, 192, 192)
\item 
\#define \textbf{ WHITE}~\textbf{ CONVERT\+\_\+\+RGB24}(255, 255, 255)
\item 
\#define \textbf{ float32\+\_\+t}~float
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \textbf{ main} (int argc, char $\ast$argv[$\,$])
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static struct fb\+\_\+var\+\_\+screeninfo \textbf{ fb\+Var\+Screen\+Info}
\item 
static uint16\+\_\+t \textbf{ y}
\item 
static uint16\+\_\+t \textbf{ x}
\item 
static int32\+\_\+t $\ast$ \textbf{ pfb32}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\label{main_8c_a7b3b25cba33b07c303f3060fe41887f6}} 
\index{main.c@{main.c}!BLACK@{BLACK}}
\index{BLACK@{BLACK}!main.c@{main.c}}
\doxysubsubsection{BLACK}
{\footnotesize\ttfamily \#define BLACK~\textbf{ CONVERT\+\_\+\+RGB24}(0, 0, 0)}



Definition at line 76 of file main.\+c.

\mbox{\label{main_8c_a79d10e672abb49ad63eeaa8aaef57c38}} 
\index{main.c@{main.c}!BLUE@{BLUE}}
\index{BLUE@{BLUE}!main.c@{main.c}}
\doxysubsubsection{BLUE}
{\footnotesize\ttfamily \#define BLUE~\textbf{ CONVERT\+\_\+\+RGB24}(0, 0, 255)}



Definition at line 80 of file main.\+c.

\mbox{\label{main_8c_a944df529d80639dad7ef6a5037b1280b}} 
\index{main.c@{main.c}!BPP32@{BPP32}}
\index{BPP32@{BPP32}!main.c@{main.c}}
\doxysubsubsection{BPP32}
{\footnotesize\ttfamily \#define BPP32~32}



Definition at line 70 of file main.\+c.

\mbox{\label{main_8c_a042ac8ea763771b01ba9c97b361864e4}} 
\index{main.c@{main.c}!CONVERT\_RGB24@{CONVERT\_RGB24}}
\index{CONVERT\_RGB24@{CONVERT\_RGB24}!main.c@{main.c}}
\doxysubsubsection{CONVERT\_RGB24}
{\footnotesize\ttfamily \#define CONVERT\+\_\+\+RGB24(\begin{DoxyParamCaption}\item[{}]{red,  }\item[{}]{green,  }\item[{}]{blue }\end{DoxyParamCaption})~  ((red $<$$<$ 16) $\vert$ (green $<$$<$ 8) $\vert$ (blue))}



Definition at line 63 of file main.\+c.

\mbox{\label{main_8c_ad243f93c16bc4c1d3e0a13b84421d760}} 
\index{main.c@{main.c}!CYAN@{CYAN}}
\index{CYAN@{CYAN}!main.c@{main.c}}
\doxysubsubsection{CYAN}
{\footnotesize\ttfamily \#define CYAN~\textbf{ CONVERT\+\_\+\+RGB24}(0, 255, 255)}



Definition at line 82 of file main.\+c.

\mbox{\label{main_8c_a24938fa843048398799e12d52d3e3693}} 
\index{main.c@{main.c}!float32\_t@{float32\_t}}
\index{float32\_t@{float32\_t}!main.c@{main.c}}
\doxysubsubsection{float32\_t}
{\footnotesize\ttfamily \#define float32\+\_\+t~float}



Definition at line 86 of file main.\+c.

\mbox{\label{main_8c_acfbc006ea433ad708fdee3e82996e721}} 
\index{main.c@{main.c}!GREEN@{GREEN}}
\index{GREEN@{GREEN}!main.c@{main.c}}
\doxysubsubsection{GREEN}
{\footnotesize\ttfamily \#define GREEN~\textbf{ CONVERT\+\_\+\+RGB24}(0, 255, 0)}



Definition at line 78 of file main.\+c.

\mbox{\label{main_8c_adce122f566c88a1eceeb79a635afa964}} 
\index{main.c@{main.c}!GREY@{GREY}}
\index{GREY@{GREY}!main.c@{main.c}}
\doxysubsubsection{GREY}
{\footnotesize\ttfamily \#define GREY~\textbf{ CONVERT\+\_\+\+RGB24}(192, 192, 192)}



Definition at line 83 of file main.\+c.

\mbox{\label{main_8c_a6f699060902f800f12aaae150f3a708e}} 
\index{main.c@{main.c}!MAGENTA@{MAGENTA}}
\index{MAGENTA@{MAGENTA}!main.c@{main.c}}
\doxysubsubsection{MAGENTA}
{\footnotesize\ttfamily \#define MAGENTA~\textbf{ CONVERT\+\_\+\+RGB24}(255, 0, 255)}



Definition at line 81 of file main.\+c.

\mbox{\label{main_8c_a8d23feea868a983c8c2b661e1e16972f}} 
\index{main.c@{main.c}!RED@{RED}}
\index{RED@{RED}!main.c@{main.c}}
\doxysubsubsection{RED}
{\footnotesize\ttfamily \#define RED~\textbf{ CONVERT\+\_\+\+RGB24}(255, 0, 0)}



Definition at line 77 of file main.\+c.

\mbox{\label{main_8c_a87b537f5fa5c109d3c05c13d6b18f382}} 
\index{main.c@{main.c}!WHITE@{WHITE}}
\index{WHITE@{WHITE}!main.c@{main.c}}
\doxysubsubsection{WHITE}
{\footnotesize\ttfamily \#define WHITE~\textbf{ CONVERT\+\_\+\+RGB24}(255, 255, 255)}



Definition at line 84 of file main.\+c.

\mbox{\label{main_8c_abf681265909adf3d3e8116c93c0ba179}} 
\index{main.c@{main.c}!YELLOW@{YELLOW}}
\index{YELLOW@{YELLOW}!main.c@{main.c}}
\doxysubsubsection{YELLOW}
{\footnotesize\ttfamily \#define YELLOW~\textbf{ CONVERT\+\_\+\+RGB24}(255, 255, 0)}



Definition at line 79 of file main.\+c.



\doxysubsection{Function Documentation}
\mbox{\label{main_8c_a0ddf1224851353fc92bfbff6f499fa97}} 
\index{main.c@{main.c}!main@{main}}
\index{main@{main}!main.c@{main.c}}
\doxysubsubsection{main()}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv[$\,$] }\end{DoxyParamCaption})}



Definition at line 121 of file main.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{122 \{}
\DoxyCodeLine{123   int32\_t fb\_fd = 0;}
\DoxyCodeLine{124   int32\_t screensize = 0;}
\DoxyCodeLine{125 }
\DoxyCodeLine{126   \textcolor{comment}{/*}}
\DoxyCodeLine{127 \textcolor{comment}{   * Open device file for reading and writing}}
\DoxyCodeLine{128 \textcolor{comment}{   */}}
\DoxyCodeLine{129   fb\_fd = open(\textcolor{stringliteral}{"{}/dev/fb0"{}}, O\_RDWR);}
\DoxyCodeLine{130   \textcolor{keywordflow}{if} (fb\_fd == -\/1)}
\DoxyCodeLine{131   \{}
\DoxyCodeLine{132     perror(\textcolor{stringliteral}{"{}Error: cannot open framebuffer device"{}});}
\DoxyCodeLine{133     exit(errno);}
\DoxyCodeLine{134   \}}
\DoxyCodeLine{135   printf(\textcolor{stringliteral}{"{}The framebuffer device fb0 was opened successfully.\(\backslash\)n"{}});}
\DoxyCodeLine{136 }
\DoxyCodeLine{137   \textcolor{comment}{/*}}
\DoxyCodeLine{138 \textcolor{comment}{   * Get variable screen information}}
\DoxyCodeLine{139 \textcolor{comment}{   */}}
\DoxyCodeLine{140   \textcolor{keywordflow}{if} (ioctl(fb\_fd, FBIOGET\_VSCREENINFO, \&fbVarScreenInfo) == -\/1)}
\DoxyCodeLine{141   \{}
\DoxyCodeLine{142     perror(\textcolor{stringliteral}{"{}Error reading variable information"{}});}
\DoxyCodeLine{143     close(fb\_fd);}
\DoxyCodeLine{144     exit(errno);}
\DoxyCodeLine{145   \}}
\DoxyCodeLine{146 }
\DoxyCodeLine{147   \textcolor{comment}{/* Figure out the size of the screen in bytes */}}
\DoxyCodeLine{148   screensize = (fbVarScreenInfo.xres * fbVarScreenInfo.yres * fbVarScreenInfo.bits\_per\_pixel) / 8;}
\DoxyCodeLine{149   printf(\textcolor{stringliteral}{"{}Screensize: \%d\(\backslash\)n"{}},screensize);}
\DoxyCodeLine{150   \textcolor{comment}{/*}}
\DoxyCodeLine{151 \textcolor{comment}{   * Map the frame buffer device memory to user space.}}
\DoxyCodeLine{152 \textcolor{comment}{   * Starting address in user space is pfb32.}}
\DoxyCodeLine{153 \textcolor{comment}{   */}}
\DoxyCodeLine{154   \textcolor{keywordflow}{if} (fbVarScreenInfo.bits\_per\_pixel == BPP32)}
\DoxyCodeLine{155   \{}
\DoxyCodeLine{156     pfb32 = (int32\_t *)mmap(0, screensize, PROT\_READ | PROT\_WRITE, MAP\_SHARED, fb\_fd, 0);}
\DoxyCodeLine{157     \textcolor{keywordflow}{if} (pfb32 == (int32\_t *)-\/1)}
\DoxyCodeLine{158     \{}
\DoxyCodeLine{159       perror(\textcolor{stringliteral}{"{}Error: failed to map 32-\/BPP framebuffer device to memory"{}});}
\DoxyCodeLine{160       exit(errno);}
\DoxyCodeLine{161     \}}
\DoxyCodeLine{162 }
\DoxyCodeLine{163     \textcolor{comment}{/* Fill the screen with 32 bpp, do it for all [x,y] pixel with desired color */}}
\DoxyCodeLine{164     \textcolor{keywordflow}{for} (y = 0; y < fbVarScreenInfo.yres; y++)}
\DoxyCodeLine{165     \{}
\DoxyCodeLine{166       \textcolor{keywordflow}{for} (x = 0; x < fbVarScreenInfo.xres; x++)}
\DoxyCodeLine{167       \{}
\DoxyCodeLine{168         pfb32[x + y * fbVarScreenInfo.xres] = BLUE;}
\DoxyCodeLine{169       \}}
\DoxyCodeLine{170     \}}
\DoxyCodeLine{171 }
\DoxyCodeLine{172     \textcolor{comment}{/* Cleanup */}}
\DoxyCodeLine{173     munmap(pfb32, screensize);}
\DoxyCodeLine{174     close(fb\_fd);}
\DoxyCodeLine{175   \}}
\DoxyCodeLine{176   \textcolor{keywordflow}{return} EXIT\_SUCCESS;}
\DoxyCodeLine{177 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\label{main_8c_a07fe59641469605398a89e0087216f08}} 
\index{main.c@{main.c}!fbVarScreenInfo@{fbVarScreenInfo}}
\index{fbVarScreenInfo@{fbVarScreenInfo}!main.c@{main.c}}
\doxysubsubsection{fbVarScreenInfo}
{\footnotesize\ttfamily struct fb\+\_\+var\+\_\+screeninfo fb\+Var\+Screen\+Info\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1 of file main.\+c.

\mbox{\label{main_8c_ad95d8451539d5c6811c140d955e25de6}} 
\index{main.c@{main.c}!pfb32@{pfb32}}
\index{pfb32@{pfb32}!main.c@{main.c}}
\doxysubsubsection{pfb32}
{\footnotesize\ttfamily int32\+\_\+t$\ast$ pfb32\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 109 of file main.\+c.

\mbox{\label{main_8c_a4dde988b1b2adba65ae3efa69f65d960}} 
\index{main.c@{main.c}!x@{x}}
\index{x@{x}!main.c@{main.c}}
\doxysubsubsection{x}
{\footnotesize\ttfamily uint16\+\_\+t x\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 107 of file main.\+c.

\mbox{\label{main_8c_ab0580f504a7428539be299fa71565f30}} 
\index{main.c@{main.c}!y@{y}}
\index{y@{y}!main.c@{main.c}}
\doxysubsubsection{y}
{\footnotesize\ttfamily uint16\+\_\+t y\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 106 of file main.\+c.

